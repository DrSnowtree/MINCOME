+ MHLABPART + FHLABPART
+ FHTOTERN74 + FHTOTERN73
+ MHTOTERN74 + MHTOTERN73
+ MHCHDCARE + FHCHDCARE
+ MHJOBSAT + FHJOBSAT
+ TOTNHINC73
+ TOTNHINC74
, data = nonpart,
max.ylev = 10 )
export2latex(createTable(compare))
library(frailtypack)
data(readmission)
View(readmission)
# set the covariate values at s_0
mycov <- data.frame(sex = "Female", charlson = "1-2")
View(mycov)
sf <- survfit(mod1, newdata = mycov)
mod1 <- coxph(Surv(t.start, t.stop, event) ~ sex + charlson + cluster(id), data = readmission)
# set the covariate values at s_0
mycov <- data.frame(sex = "Female", charlson = "1-2")
sf <- survfit(mod1, newdata = mycov)
# with different s_0
par(mfrow=c(2,2))
time <- c(300, 500, 700, 1000)
for(i in time) {
pos <- which.max(sf$time[sf$time <= i])
S_s0 <- sf$surv[pos]
with(sf, plot(time[pos:length(time)], surv[pos:length(surv)] / S_s0), type = "l")
}
dataag <- readRDS("W:/WU/Projekte/mincome/Mincome/Data/dataag.rds")
View(dataag)
cphfit = coxph(Surv(start,finish,event)~treated+experiment+experiment+treated
+ number+size+cluster(OID),data=dataag)
cphfit = coxph(Surv(start,finish,event)~treated+experiment+experiment*treated
+ cluster(OID),data=dataag)
View(cphfit)
install.packages("xlsx")
library("xlsx")
write.xlsx(dataag, dataag.xlsx)
write.xlsx(dataag.xlsx, dataag)
write.xlsx(dataag, "dataag.xlsx")
cd
getwd()
setwd("W:/WU/Projekte/mincome/Mincome/Data")
familydata <- read_excel("familydata.xlsx")
familydata <- familydata %>%  rename(
FAMNUM = "FAMNUM...1")
familydata <- familydata %>%
dplyr::select("FAMNUM",
"clbegan", "mrgbegan", "mrgbegan2",
"mrgstatchng1",  "mrgstatchng2", "mrgstatchng3",
"mrgstatchng4",  "mrgstatchng5", "mrgstatchng6", "mrgstatchng7",
"mrtstatus1", "mrtstatus2",  "mrtstatus3",
"mrtstatus4",  "mrtstatus5",  "mrtstatus6",  "mrtstatus7",
"mrtstatus8", "mrtstatus9", "prevmrg", "endprevmrg",
"lengthmrg", "lengthmrgprev", "chout", "chage",
"datesepcl", "datesepmrg")
names(familydata)
familydata[familydata == -9] <- NA
familydata[familydata == -8] <- NA
familydata[familydata == -4] <- NA
substrRight <- function(x, n){
substr(x, nchar(x)-n+1, nchar(x))
}
#marriage ends, beginnings, turn the date to a proper year
familydata$clbegan <- substrRight(familydata$clbegan, 2)
familydata$clbegan <-ifelse(!is.na(familydata$clbegan), paste("19", familydata$clbegan, sep=""), paste("NA"))
familydata$mrgbegan <- substrRight(familydata$mrgbegan, 2)
familydata$mrgbegan <-ifelse(!is.na(familydata$mrgbegan), paste("19", familydata$mrgbegan, sep=""), paste(NA))
familydata$mrgbegan2 <- substrRight(familydata$mrgbegan2, 2)
familydata$mrgbegan2 <-ifelse(!is.na(familydata$mrgbegan2), paste("19", familydata$mrgbegan2, sep=""), paste(NA))
familydata[familydata == "NA"] <- NA
#mrgbegan and mrgbegan2 are the same info, just asked to male or female, so let´s combine them
familydata$mrgbegan <-
ifelse(!is.na(familydata$mrgbegan), paste(familydata$mrgbegan), paste(familydata$mrgbegan2))
familydata[familydata == "NA"] <- NA
familydata$mrgstatchng1 <- substrRight(familydata$mrgstatchng1, 2)
familydata$mrgstatchng1 <-ifelse(!is.na(familydata$mrgstatchng1), paste("19", familydata$mrgstatchng1, sep=""), paste(NA))
familydata$mrgstatchng2 <- substrRight(familydata$mrgstatchng2, 2)
familydata$mrgstatchng2 <-ifelse(!is.na(familydata$mrgstatchng2), paste("19", familydata$mrgstatchng2, sep=""), paste(NA))
familydata$mrgstatchng3 <- substrRight(familydata$mrgstatchng3, 2)
familydata$mrgstatchng3 <-ifelse(!is.na(familydata$mrgstatchng3), paste("19", familydata$mrgstatchng2, sep=""), paste(NA))
familydata$mrgstatchng4 <- substrRight(familydata$mrgstatchng4, 2)
familydata$mrgstatchng4 <-ifelse(!is.na(familydata$mrgstatchng4), paste("19", familydata$mrgstatchng3, sep=""), paste(NA))
familydata$mrgstatchng5 <- substrRight(familydata$mrgstatchng5, 2)
familydata$mrgstatchng5 <-ifelse(!is.na(familydata$mrgstatchng5), paste("19", familydata$mrgstatchng5, sep=""), paste(NA))
familydata$mrgstatchng6 <- substrRight(familydata$mrgstatchng6, 2)
familydata$mrgstatchng6 <-ifelse(!is.na(familydata$mrgstatchng6), paste("19", familydata$mrgstatchng6, sep=""), paste(NA))
familydata$mrgstatchng7 <- substrRight(familydata$mrgstatchng7, 2)
familydata$mrgstatchng7 <-ifelse(!is.na(familydata$mrgstatchng7), paste("19", familydata$mrgstatchng7, sep=""), paste(NA))
familydata$endprevmrg <- substrRight(familydata$endprevmrg, 2)
familydata$endprevmrg <-ifelse(!is.na(familydata$endprevmrg), paste("19", familydata$endprevmrg, sep=""), paste(NA))
familydata$datesepcl <- substrRight(familydata$datesepcl, 2)
familydata$datesepcl <-ifelse(!is.na(familydata$datesepcl), paste("19", familydata$datesepcl, sep=""), paste(NA))
familydata$datesepmrg <- substrRight(familydata$datesepmrg, 2)
familydata$datesepmrg <-ifelse(!is.na(familydata$datesepmrg), paste("19", familydata$datesepmrg, sep=""), paste(NA))
familydata[familydata == "NA"] <- NA
saveRDS(familydata, "familydata.rds")
stata.merge <- function(x,y, by = intersect(names(x), names(y))){
x[is.na(x)] <- Inf
y[is.na(y)] <- Inf
matched <- merge(x, y, by.x = by, by.y = by, all = TRUE)
matched <- matched[complete.cases(matched),]
matched$merge <- "matched"
master <- merge(x, y, by.x = by, by.y = by, all.x = TRUE)
master <- master[!complete.cases(master),]
master$merge <- "master"
using <- merge(x, y, by.x = by, by.y = by, all.y = TRUE)
using <- using[!complete.cases(using),]
using$merge <- "using"
df <- rbind(matched, master,using)
df[sapply(df, is.infinite)] <- NA
df
}
library("compareGroups")
library("data.table")
library("gtools")
library("haven")
library("dplyr")
library("tidyr")
library("tidyverse")
library("lubridate")
library("data.table")
library("foreign")
library("haven")
library("quantmod")
library("zoo")
library("plm")
library("gplots")
library("stargazer")
library("lfe")
library("Hmisc")
library("readxl")
library("naniar")
library("strex")
library(devtools)
library(survival)
library(pltesim)
library(informR)
library(frailtypack)
familydata <- read_excel("familydata.xlsx")
familydata <- familydata %>%  rename(
FAMNUM = "FAMNUM...1")
familydata <- familydata %>%
dplyr::select("FAMNUM",
"clbegan", "mrgbegan", "mrgbegan2",
"mrgstatchng1",  "mrgstatchng2", "mrgstatchng3",
"mrgstatchng4",  "mrgstatchng5", "mrgstatchng6", "mrgstatchng7",
"mrtstatus1", "mrtstatus2",  "mrtstatus3",
"mrtstatus4",  "mrtstatus5",  "mrtstatus6",  "mrtstatus7",
"mrtstatus8", "mrtstatus9", "prevmrg", "endprevmrg",
"lengthmrg", "lengthmrgprev", "chout", "chage",
"datesepcl", "datesepmrg")
names(familydata)
familydata[familydata == -9] <- NA
familydata[familydata == -8] <- NA
familydata[familydata == -4] <- NA
substrRight <- function(x, n){
substr(x, nchar(x)-n+1, nchar(x))
}
#marriage ends, beginnings, turn the date to a proper year
familydata$clbegan <- substrRight(familydata$clbegan, 2)
familydata$clbegan <-ifelse(!is.na(familydata$clbegan), paste("19", familydata$clbegan, sep=""), paste("NA"))
familydata$mrgbegan <- substrRight(familydata$mrgbegan, 2)
familydata$mrgbegan <-ifelse(!is.na(familydata$mrgbegan), paste("19", familydata$mrgbegan, sep=""), paste(NA))
familydata$mrgbegan2 <- substrRight(familydata$mrgbegan2, 2)
familydata$mrgbegan2 <-ifelse(!is.na(familydata$mrgbegan2), paste("19", familydata$mrgbegan2, sep=""), paste(NA))
familydata[familydata == "NA"] <- NA
#mrgbegan and mrgbegan2 are the same info, just asked to male or female, so let´s combine them
familydata$mrgbegan <-
ifelse(!is.na(familydata$mrgbegan), paste(familydata$mrgbegan), paste(familydata$mrgbegan2))
familydata[familydata == "NA"] <- NA
familydata$mrgstatchng1 <- substrRight(familydata$mrgstatchng1, 2)
familydata$mrgstatchng1 <-ifelse(!is.na(familydata$mrgstatchng1), paste("19", familydata$mrgstatchng1, sep=""), paste(NA))
familydata$mrgstatchng2 <- substrRight(familydata$mrgstatchng2, 2)
familydata$mrgstatchng2 <-ifelse(!is.na(familydata$mrgstatchng2), paste("19", familydata$mrgstatchng2, sep=""), paste(NA))
familydata$mrgstatchng3 <- substrRight(familydata$mrgstatchng3, 2)
familydata$mrgstatchng3 <-ifelse(!is.na(familydata$mrgstatchng3), paste("19", familydata$mrgstatchng2, sep=""), paste(NA))
familydata$mrgstatchng4 <- substrRight(familydata$mrgstatchng4, 2)
familydata$mrgstatchng4 <-ifelse(!is.na(familydata$mrgstatchng4), paste("19", familydata$mrgstatchng3, sep=""), paste(NA))
familydata$mrgstatchng5 <- substrRight(familydata$mrgstatchng5, 2)
familydata$mrgstatchng5 <-ifelse(!is.na(familydata$mrgstatchng5), paste("19", familydata$mrgstatchng5, sep=""), paste(NA))
familydata$mrgstatchng6 <- substrRight(familydata$mrgstatchng6, 2)
familydata$mrgstatchng6 <-ifelse(!is.na(familydata$mrgstatchng6), paste("19", familydata$mrgstatchng6, sep=""), paste(NA))
familydata$mrgstatchng7 <- substrRight(familydata$mrgstatchng7, 2)
familydata$mrgstatchng7 <-ifelse(!is.na(familydata$mrgstatchng7), paste("19", familydata$mrgstatchng7, sep=""), paste(NA))
familydata$endprevmrg <- substrRight(familydata$endprevmrg, 2)
familydata$endprevmrg <-ifelse(!is.na(familydata$endprevmrg), paste("19", familydata$endprevmrg, sep=""), paste(NA))
familydata$datesepcl <- substrRight(familydata$datesepcl, 2)
familydata$datesepcl <-ifelse(!is.na(familydata$datesepcl), paste("19", familydata$datesepcl, sep=""), paste(NA))
familydata$datesepmrg <- substrRight(familydata$datesepmrg, 2)
familydata$datesepmrg <-ifelse(!is.na(familydata$datesepmrg), paste("19", familydata$datesepmrg, sep=""), paste(NA))
familydata[familydata == "NA"] <- NA
saveRDS(familydata, "familydata.rds")
stata.merge <- function(x,y, by = intersect(names(x), names(y))){
x[is.na(x)] <- Inf
y[is.na(y)] <- Inf
matched <- merge(x, y, by.x = by, by.y = by, all = TRUE)
matched <- matched[complete.cases(matched),]
matched$merge <- "matched"
master <- merge(x, y, by.x = by, by.y = by, all.x = TRUE)
master <- master[!complete.cases(master),]
master$merge <- "master"
using <- merge(x, y, by.x = by, by.y = by, all.y = TRUE)
using <- using[!complete.cases(using),]
using$merge <- "using"
df <- rbind(matched, master,using)
df[sapply(df, is.infinite)] <- NA
df
}
data_personperiod <- stata.merge(data_personperiod, familydata, by = "FAMNUM")
data_personperiod <- merge(data_personperiod, familydata, by = "FAMNUM")
setwd("W:/WU/Projekte/mincome/Mincome/Data")
install.packages("compareGroups")
install.packages("data.table")
install.packages("gtools")
install.packages("haven")
install.packages("dplyr")
install.packages("tidyr")
install.packages("tidyverse")
install.packages("compareGroups")
data_personperiod <- readRDS("W:/WU/Projekte/mincome/Mincome/Data/data_personperiod.rds")
View(data_personperiod)
data_personperiod <- merge(data_personperiod, familydata, by = "FAMNUM")
data_personperiod$married <- 0
data_personperiod$married[data_personperiod$year == data_personperiod$mrgbegan] <- 1
data_personperiod$prevmrgbegan <- 0
data_personperiod$prevmrgbegan <- is.na(data_personperiod$prevmrgbegan)
data_personperiod$prevmrgbegan <- NA
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod$prevmrgbegan[!is.na(data_personperiod$endprevmrg)] <- data_personperiod$endprevmrg - data_personperiod$lengthmrgprev
data_personperiod$prevmrgbegan[!is.na(data_personperiod$endprevmrg)] <- is.numeric(data_personperiod$endprevmrg) - data_personperiod$lengthmrgprev
is.numeric(data_personperiod$endprevmrg)
- is.numeric(data_personperiod$lengthmrgprev)
is.numeric(data_personperiod$lengthmrgprev)
data_personperiod$endprevmrg<- as.numeric(data_personperiod$endprevmrg)
data_personperiod$prevmrgbegan[!is.na(data_personperiod$endprevmrg)] <- data_personperiod$endprevmrg
data_personperiod$prevmrgbegan <-
data_personperiod$endprevmrg - data_personperiod$lengthmrgprev
data_personperiod$married[data_personperiod$year == data_personperiod$prevmrgbegan] <- 1
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng2))
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng3))
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng4))
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng5))
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng6))
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng7))
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng7))
familydata$mrgstatchng1 <-
ifelse(!is.na(familydata$mrgstatchng1), paste(familydata$mrgstatchng1), paste(familydata$mrgstatchng7))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng2))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng3))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng4))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng5))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng6))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng7))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng2))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng3))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng4))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng5))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng6))
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng7))
data_personperiod <- readRDS("W:/WU/Projekte/mincome/Mincome/Data/data_personperiod.rds")
data_personperiod <- merge(data_personperiod, familydata, by = "FAMNUM")
saveRDS(data_personperiod, "data_personperiod.rds")
data_personperiod$married <- 0
data_personperiod$married[data_personperiod$year == data_personperiod$mrgbegan] <- 1
data_personperiod$prevmrgbegan <- NA
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod$endprevmrg<- as.numeric(data_personperiod$endprevmrg)
data_personperiod$prevmrgbegan <-
data_personperiod$endprevmrg - data_personperiod$lengthmrgprev
data_personperiod$married[data_personperiod$year == data_personperiod$prevmrgbegan] <- 1
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng2))
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng3))
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng4))
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng5))
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng6))
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod$mrgstatchng1 <-
ifelse(!is.na(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng1), paste(data_personperiod$mrgstatchng7))
data_personperiod[data_personperiod == "NA"] <- NA
data_personperiod <- data_personperiod %>%  rename(
mrgstatchng = mrgstatchng1)
library("compareGroups")
library("data.table")
library("gtools")
library("haven")
library("dplyr")
library("tidyr")
library("tidyverse")
library("lubridate")
library("data.table")
library("foreign")
library("haven")
library("quantmod")
library("zoo")
library("plm")
library("gplots")
library("stargazer")
library("lfe")
library("Hmisc")
library("readxl")
library("naniar")
library("strex")
library(devtools)
library(survival)
library(pltesim)
library(informR)
library(frailtypack)
data_personperiod <- data_personperiod %>%  rename(
mrgstatchng = mrgstatchng1)
data_personperiod$separated <- 0
data_personperiod$separated[data_personperiod$year == data_personperiod$datesepcl |
data_personperiod$year == data_personperiod$datesepmrg ] <- 1
data_personperiod$mrgid <-
ifelse(data_personperiod$married == 1, paste(data_personperiod$OID, data_personperiod$year, sep=""), NA)
data_personperiod$mrgid <-
ifelse(data_personperiod$separated == 1, paste(data_personperiod$OID, data_personperiod$year, sep=""), data_personperiod$mrgid)
data_personperiod[data_personperiod == "NA"] <- NA
dim(data_personperiod)
saveRDS(data_personperiod, "data_personperiod.rds")
changmt <- 0
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
changmt = data_personperiod$change[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && govt_mpds$country[i] == fem){
data_personperiod$OID[i] = changmt
}
}
changmt <- 0
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
changmt = data_personperiod$change[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$OID[i] = changmt
}
}
mrg = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
mrg = data_personperiod$mrgid[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$mrgid[i] = mrg
}
}
mrg = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
mrg = data_personperiod$mrgid[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$mrgid[i] = mrg
}
}
mrg = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
mrg = data_personperiod$mrgid[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) & data_personperiod$OID[i] == fem){
data_personperiod$mrgid[i] = mrg
}
}
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$married[i] = marie
}
}
class(data_personperiod$mrgid)
is.na(data_personperiod$mrgid)
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$married[i] = marie
}
}
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$married[i] = marie
}
}
is.na(data_personperiod$mrgid[i]
is.na(data_personperiod$mrgid
na <- is.na(data_personperiod$mrgid)
view(na)
View(na)
is.na(na)
na <- is.na(na)
na <- is.na(data_personperiod$mrgid)
nana <- is.na(na)
View(na)
View(nana)
levels(nana$V1)
dim(nana$V1)
sum(is.na(na))
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$married[i] = marie
}
}
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
ifelse (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
ifelse (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$married[i] = marie
}
}
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$married[i] = marie
}
}
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
}
marie = NA
fem = data_personperiod$OID[1]
for (i in 1:dim(data_personperiod)[1]){
if (!is.na(data_personperiod$mrgid[i])){
marie = data_personperiod$married[i]
fem = data_personperiod$OID[i]
}
else if (is.na(data_personperiod$mrgid[i]) && data_personperiod$OID[i] == fem){
data_personperiod$married[i] = marie
}
}
